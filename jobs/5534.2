travis_fold:start:worker_infoWorker information
hostname: 6e93f676-a105-4423-b9ed-ad03ef6241c6@1.worker-org-576dc846d-bd4sm.gce-production-2
version: v6.2.17 https://github.com/travis-ci/worker/tree/bc420764f334fe0d096a417c80426f672f1b7d18
instance: travis-job-f29a37ae-60a7-47cb-987f-4fb30077efc3 travis-ci-sardonyx-xenial-1553530528-f909ac5 (via amqp)
startup: 6.220368754s
travis_fold:end:worker_infoe:start:0d574622e:end:0d574622:start=1592094140995777057,finish=1592094141124987372,duration=129210315,event=no_world_writable_dirse:start:09352d38e:end:09352d38:start=1592094141127485968,finish=1592094141130039146,duration=2553178,event=setup_filtere:start:0f88d2e0e:end:0f88d2e0:start=1592094141135471787,finish=1592094141142449438,duration=6977651,event=agente:start:139e4800e:end:139e4800:start=1592094141144812194,finish=1592094141146673991,duration=1861797,event=check_unsupportede:start:017f1e94_infoBuild system information
Build language: node_js
Build dist: xenial
Build id: 698089980
Job id: 698089982
Runtime kernel version: 4.15.0-1028-gcp
travis-build version: 07730dca
Build image provisioning date and time
Mon Mar 25 16:43:24 UTC 2019
Operating System Details
Distributor ID:Ubuntu
Description:Ubuntu 16.04.6 LTS
Release:16.04
Codename:xenial
Systemd Version
systemd 229
Cookbooks Version
42e42e4 https://github.com/travis-ci/travis-cookbooks/tree/42e42e4
git version
git version 2.21.0
bash version
GNU bash, version 4.3.48(1)-release (x86_64-pc-linux-gnu)
gcc version
gcc (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609
docker version
Client:
 Version:           18.06.0-ce
 API version:       1.38
 Go version:        go1.10.3
 Git commit:        0ffa825
 Built:             Wed Jul 18 19:11:02 2018
 OS/Arch:           linux/amd64
 Experimental:      false

Server:
 Engine:
  Version:          18.06.0-ce
  API version:      1.38 (minimum version 1.12)
  Go version:       go1.10.3
  Git commit:       0ffa825
  Built:            Wed Jul 18 19:09:05 2018
  OS/Arch:          linux/amd64
  Experimental:     false
clang version
clang version 7.0.0 (tags/RELEASE_700/final)
jq version
jq-1.5
bats version
Bats 0.4.0
shellcheck version
0.6.0
shfmt version
v2.6.3
ccache version
3.2.4
cmake version
cmake version 3.12.4
heroku version
heroku/7.22.7 linux-x64 node-v11.10.1
imagemagick version
Version: ImageMagick 6.8.9-9 Q16 x86_64 2018-09-28 http://www.imagemagick.org
md5deep version
4.4
mercurial version
version 4.8
mysql version
mysql  Ver 14.14 Distrib 5.7.25, for Linux (x86_64) using  EditLine wrapper
openssl version
OpenSSL 1.0.2g  1 Mar 2016
packer version
1.3.3
postgresql client version
psql (PostgreSQL) 10.7 (Ubuntu 10.7-1.pgdg16.04+1)
ragel version
Ragel State Machine Compiler version 6.8 Feb 2013
sudo version
1.8.16
gzip version
gzip 1.6
zip version
Zip 3.0
vim version
VIM - Vi IMproved 7.4 (2013 Aug 10, compiled Nov 24 2016 16:44:48)
iptables version
iptables v1.6.0
curl version
curl 7.47.0 (x86_64-pc-linux-gnu) libcurl/7.47.0 GnuTLS/3.4.10 zlib/1.2.8 libidn/1.32 librtmp/2.3
wget version
GNU Wget 1.17.1 built on linux-gnu.
rsync version
rsync  version 3.1.1  protocol version 31
gimme version
v1.5.3
nvm version
0.34.0
perlbrew version
/home/travis/perl5/perlbrew/bin/perlbrew  - App::perlbrew/0.86
phpenv version
rbenv 1.1.2
rvm version
rvm 1.29.7 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io]
default ruby version
ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]
CouchDB version
couchdb 1.6.1
ElasticSearch version
5.5.0
Installed Firefox version
firefox 63.0.1
MongoDB version
MongoDB 4.0.7
PhantomJS version
2.1.1
Pre-installed PostgreSQL versions
9.4.21
9.5.16
9.6.12
Redis version
redis-server 5.0.4
Pre-installed Go versions
1.11.1
mvn version
Apache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3; 2018-10-24T18:41:47Z)
gradle version
Gradle 4.10.2!
lein version
Leiningen 2.9.1 on Java 11.0.2 OpenJDK 64-Bit Server VM
Pre-installed Node.js versions
v10.15.3
v11.0.0
v4.9.1
v6.17.0
v8.12.0
v8.15.1
v8.9
phpenv versions
  system
  5.6
  5.6.40
  7.1
  7.1.27
  7.2
* 7.2.15 (set by /home/travis/.phpenv/version)
  hhvm
  hhvm-stable
composer --version
Composer version 1.8.4 2019-02-11 10:52:10
Pre-installed Ruby versions
ruby-2.3.8
ruby-2.4.5
ruby-2.5.3
travis_fold:end:system_infoe:end:017f1e94:start=1592094141148935597,finish=1592094141154380565,duration=5444968,event=show_system_infoe:start:1c083e04e:end:1c083e04:start=1592094141156657022,finish=1592094141166480277,duration=9823255,event=rm_riak_sourcee:start:17d7bc92e:end:17d7bc92:start=1592094141168970387,finish=1592094141174922638,duration=5952251,event=fix_rwky_redise:start:024d6ccbe:end:024d6ccb:start=1592094141177400057,finish=1592094141870607968,duration=693207911,event=wait_for_networke:start:0d8bfd14e:end:0d8bfd14:start=1592094141874590970,finish=1592094142077169158,duration=202578188,event=update_apt_keyse:start:05f4c260e:end:05f4c260:start=1592094142080670780,finish=1592094142129055843,duration=48385063,event=fix_hhvm_sourcee:start:0c471094e:end:0c471094:start=1592094142132836266,finish=1592094142135369778,duration=2533512,event=update_mongo_arche:start:10c25160e:end:10c25160:start=1592094142138608610,finish=1592094142176932155,duration=38323545,event=fix_sudo_enabled_trustye:start:0403057ce:end:0403057c:start=1592094142181004749,finish=1592094142183032515,duration=2027766,event=update_glibce:start:17f58fc3e:end:17f58fc3:start=1592094142187149217,finish=1592094142194322721,duration=7173504,event=clean_up_pathe:start:01829b90e:end:01829b90:start=1592094142197922373,finish=1592094142204908011,duration=6985638,event=fix_resolv_confe:start:107f414de:end:107f414d:start=1592094142208251180,finish=1592094142216718269,duration=8467089,event=fix_etc_hostse:start:07e57624e:end:07e57624:start=1592094142221459787,finish=1592094142231473904,duration=10014117,event=fix_mvn_settings_xmle:start:314a1f48e:end:314a1f48:start=1592094142234721914,finish=1592094142243126139,duration=8404225,event=no_ipv6_localhoste:start:01383d07e:end:01383d07:start=1592094142246255030,finish=1592094142248243010,duration=1987980,event=fix_etc_mavenrce:start:0054e5b3e:end:0054e5b3:start=1592094142251511442,finish=1592094142254221903,duration=2710461,event=fix_wwdr_certificatee:start:13a34dc7e:end:13a34dc7:start=1592094142257266984,finish=1592094142279219660,duration=21952676,event=put_localhost_firste:start:08bd5772e:end:08bd5772:start=1592094142282924634,finish=1592094142285858744,duration=2934110,event=home_pathse:start:0aec950ae:end:0aec950a:start=1592094142288852525,finish=1592094142300214272,duration=11361747,event=disable_initramfse:start:059e3ebae:end:059e3eba:start=1592094142303969139,finish=1592094142621653016,duration=317683877,event=disable_ssh_roaminge:start:097249a1e:end:097249a1:start=1592094142625422800,finish=1592094142628010902,duration=2588102,event=debug_toolse:start:23057648e:end:23057648:start=1592094142631598346,finish=1592094142634470268,duration=2871922,event=uninstall_oclinte:start:195f5a93e:end:195f5a93:start=1592094142639151582,finish=1592094142641695513,duration=2543931,event=rvm_usee:start:02c6fe98e:end:02c6fe98:start=1592094142645105346,finish=1592094142652020524,duration=6915178,event=rm_etc_boto_cfge:start:0511ec5ce:end:0511ec5c:start=1592094142655308623,finish=1592094142657945300,duration=2636677,event=rm_oraclejdk8_symlinke:start:0789aba0e:end:0789aba0:start=1592094142660958435,finish=1592094142757656715,duration=96698280,event=enable_i386e:start:00954ccce:end:00954ccc:start=1592094142761214525,finish=1592094142766418151,duration=5203626,event=update_rubygemse:start:13d51bd0e:end:13d51bd0:start=1592094142769714625,finish=1592094143519190706,duration=749476081,event=ensure_path_componentse:start:0324c4b4e:end:0324c4b4:start=1592094143524812451,finish=1592094143527087843,duration=2275392,event=redefine_curle:start:1290c40ee:end:1290c40e:start=1592094143530327778,finish=1592094143634319623,duration=103991845,event=nonblock_pipee:start:1c24eedae:end:1c24eeda:start=1592094143639903569,finish=1592094149666513104,duration=6026609535,event=apt_get_updatee:start:1883b7b0e:end:1883b7b0:start=1592094149670596231,finish=1592094149672705497,duration=2109266,event=deprecate_xcode_64e:start:01354464e:end:01354464:start=1592094149676100904,finish=1592094152135352044,duration=2459251140,event=update_herokue:start:226e0060e:end:226e0060:start=1592094152138905808,finish=1592094152141343358,duration=2437550,event=shell_session_updatee:start:010fd399tutue:end:010fd399:start=1592094152144516751,finish=1592094154371569960,duration=2227053209,event=set_docker_mtue:start:08a69194e:end:08a69194:start=1592094154378930884,finish=1592094154438246869,duration=59315985,event=resolvconfe:start:0515cabce:end:0515cabc:start=1592094154443111651,finish=1592094154586531143,duration=143419492,event=maven_central_mirrore:start:062b0800e:end:062b0800:start=1592094154590729750,finish=1592094154679407036,duration=88677286,event=maven_httpse:start:003c54fae:start:03a9d11bctl start docker
travis_time:end:03a9d11b:start=1592094154686449546,finish=1592094154696981015,duration=10531469,event=preparee:end:03a9d11b:start=1592094154686449546,finish=1592094157701691780,duration=3015242234,event=servicese:start:1728ee04e:end:1728ee04:start=1592094157706622732,finish=1592094157708681529,duration=2058797,event=fix_ps4e:start:00077835e:start:20f3174c/ether/etherpad-lite.git ether/etherpad-lite
Cloning into 'ether/etherpad-lite'...
travis_time:end:20f3174c:start=1592094157717019154,finish=1592094158741151825,duration=1024132671,event=checkoute:start:00012c90erge:
From https://github.com/ether/etherpad-lite
 * branch              refs/pull/3855/merge -> FETCH_HEAD
travis_time:end:00012c90:start=1592094158745158713,finish=1592094160751421390,duration=2006262677,event=checkoute:end:00012c90:start=1592094158745158713,finish=1592094160812435368,duration=2067276655,event=checkoute:start:28562178Encrypted environment variables have been removed for security reasons.
See https://docs.travis-ci.com/user/pull-requests/#pull-requests-and-security-restrictions

Setting environment variables from .travis.yml
$ export IMAGE_NAME=etherpad:test

travis_time:end:28562178:start=1592094160815802525,finish=1592094160822707444,duration=6904919,event=env.installe:start:0e0bcdfa install lts/*
Downloading and installing node v12.18.0...
Downloading https://nodejs.org/dist/v12.18.0/node-v12.18.0-linux-x64.tar.xz...
Computing checksum with sha256sum
Checksums matched!
Now using node v12.18.0 (npm v6.14.4)
travis_time:end:0e0bcdfa:start=1592094161428192065,finish=1592094164101438557,duration=2673246492,event=setup.install --version
6.14.4
$ nvm --version
0.35.3

travis_fold:start:installe:start:29e8eb1f install && cd -

> wd@1.12.1 install /home/travis/build/ether/etherpad-lite/src/node_modules/wd
> node scripts/build-browser-scripts

npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.3 (node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.3: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

added 1071 packages from 1181 contributors and audited 1074 packages in 15.592s

62 packages are looking for funding
  run `npm fund` for details

found 1 low severity vulnerability
  run `npm audit fix` to fix them, or `npm audit` for details
/home/travis/build/ether/etherpad-lite
travis_time:end:29e8eb1f:start=1592094164595400324,finish=1592094180970497735,duration=16375097411,event=installe:start:06aba8ccon  8.186MB
Step 1/16 : FROM node:10-buster-slim
10-buster-slim: Pulling from library/node
8559a31e96f4: Pulling fs layer
cd8ab664fcca: Pulling fs layer
1d45453fab68: Pulling fs layer
8999a4a22aef: Pulling fs layer
01024e5f1f4c: Pulling fs layer
8999a4a22aef: Waiting
01024e5f1f4c: Waiting
cd8ab664fcca: Download complete
1d45453fab68: Verifying Checksum
1d45453fab68: Download complete
8559a31e96f4: Verifying Checksum
8559a31e96f4: Download complete
8999a4a22aef: Verifying Checksum
8999a4a22aef: Download complete
01024e5f1f4c: Verifying Checksum
01024e5f1f4c: Download complete
8559a31e96f4: Pull complete
cd8ab664fcca: Pull complete
1d45453fab68: Pull complete
8999a4a22aef: Pull complete
01024e5f1f4c: Pull complete
Digest: sha256:ab8807ef49075f6f10b56b2442b09fb45f959938958817d737b3e69cdfa5323d
Status: Downloaded newer image for node:10-buster-slim
 ---> b6640f0a8684
Step 2/16 : LABEL maintainer="Etherpad team, https://github.com/ether/etherpad-lite"
 ---> Running in e7a9e90774b5
Removing intermediate container e7a9e90774b5
 ---> 11738958c638
Step 3/16 : ARG ETHERPAD_PLUGINS=
 ---> Running in 262fe4f9e018
Removing intermediate container 262fe4f9e018
 ---> 8f39a567504b
Step 4/16 : ENV NODE_ENV=production
 ---> Running in 5b9a9c976465
Removing intermediate container 5b9a9c976465
 ---> 2cc67396ef8d
Step 5/16 : RUN useradd --uid 5001 --create-home etherpad
 ---> Running in 11a87028b197
Removing intermediate container 11a87028b197
 ---> 9fe4e9e779b9
Step 6/16 : RUN apt-get install -y --no-install-recommends netcat && mkdir /opt/etherpad-lite && chown etherpad:0 /opt/etherpad-lite
 ---> Running in f45a5e02b4f1
Reading package lists...
Building dependency tree...
Reading state information...
E: Unable to locate package netcat
The command '/bin/sh -c apt-get install -y --no-install-recommends netcat && mkdir /opt/etherpad-lite && chown etherpad:0 /opt/etherpad-lite' returned a non-zero code: 100
travis_time:end:06aba8cc:start=1592094180975974381,finish=1592094190006637108,duration=9030662727,event=scriptThe command "docker build -t ${IMAGE_NAME} ." exited with 100.
travis_time:start:03bd0290age 'etherpad:test' locally
docker: Error response from daemon: pull access denied for etherpad, repository does not exist or may require 'docker login'.
See 'docker run --help'.
travis_time:end:03bd0290:start=1592094190013107550,finish=1592094190606687680,duration=593580130,event=scriptThe command "docker run -d -p 9001:9001 ${IMAGE_NAME} && sleep 3" exited with 125.
travis_time:start:195edd8c run test-container

> ep_etherpad-lite@1.8.4 test-container /home/travis/build/ether/etherpad-lite/src
> nyc mocha --timeout 5000 ../tests/container/specs/api



  Connectivity
    1) can connect

  API Versioning
    2) finds the version tag

  Permission
    3) errors with invalid APIKey


  0 passing (17ms)
  3 failing

  1) Connectivity
       can connect:
     Error: ECONNREFUSED: Connection refused
      at Test.assert (node_modules/supertest/lib/test.js:165:15)
      at localAssert (node_modules/supertest/lib/test.js:131:12)
      at /home/travis/build/ether/etherpad-lite/src/node_modules/supertest/lib/test.js:128:5
      at Test.Request.callback (node_modules/superagent/lib/node/index.js:728:3)
      at ClientRequest.<anonymous> (node_modules/superagent/lib/node/index.js:647:10)
      at Socket.socketErrorListener (_http_client.js:426:9)
      at emitErrorNT (internal/streams/destroy.js:92:8)
      at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  2) API Versioning
       finds the version tag:
     Error: ECONNREFUSED: Connection refused
      at Test.assert (node_modules/supertest/lib/test.js:165:15)
      at localAssert (node_modules/supertest/lib/test.js:131:12)
      at /home/travis/build/ether/etherpad-lite/src/node_modules/supertest/lib/test.js:128:5
      at Test.Request.callback (node_modules/superagent/lib/node/index.js:728:3)
      at ClientRequest.<anonymous> (node_modules/superagent/lib/node/index.js:647:10)
      at Socket.socketErrorListener (_http_client.js:426:9)
      at emitErrorNT (internal/streams/destroy.js:92:8)
      at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)

  3) Permission
       errors with invalid APIKey:
     Error: ECONNREFUSED: Connection refused
      at Test.assert (node_modules/supertest/lib/test.js:165:15)
      at localAssert (node_modules/supertest/lib/test.js:131:12)
      at /home/travis/build/ether/etherpad-lite/src/node_modules/supertest/lib/test.js:128:5
      at Test.Request.callback (node_modules/superagent/lib/node/index.js:728:3)
      at ClientRequest.<anonymous> (node_modules/superagent/lib/node/index.js:647:10)
      at Socket.socketErrorListener (_http_client.js:426:9)
      at emitErrorNT (internal/streams/destroy.js:92:8)
      at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
      at processTicksAndRejections (internal/process/task_queues.js:84:21)



----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |       0 |        0 |       0 |       0 |                   
----------|---------|----------|---------|---------|-------------------
npm ERR! code ELIFECYCLE
npm ERR! errno 3
npm ERR! ep_etherpad-lite@1.8.4 test-container: `nyc mocha --timeout 5000 ../tests/container/specs/api`
npm ERR! Exit status 3
npm ERR! 
npm ERR! Failed at the ep_etherpad-lite@1.8.4 test-container script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     /home/travis/.npm/_logs/2020-06-14T00_23_11_572Z-debug.log
travis_time:end:195edd8c:start=1592094190612736379,finish=1592094191600883812,duration=988147433,event=scriptThe command "cd src && npm run test-container" exited with 3.


Done. Your build exited with 1.
