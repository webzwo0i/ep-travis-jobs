travis_fold:start:worker_infoWorker information
hostname: 4b04414e-f37d-4b07-8367-11bfe8e8c003@1.worker-org-8b5957499-h6bfh.gce-production-3
version: v6.2.17 https://github.com/travis-ci/worker/tree/bc420764f334fe0d096a417c80426f672f1b7d18
instance: travis-job-c54d1f81-26df-41cc-b458-d3eaa32283d0 travis-ci-sardonyx-xenial-1593004276-4d46c6b3 (via amqp)
startup: 6.246632745s
travis_fold:end:worker_infoe:start:055d4a10e:end:055d4a10:start=1601333259332421559,finish=1601333259492797692,duration=160376133,event=no_world_writable_dirse:start:16a7bdc0e:end:16a7bdc0:start=1601333259495778584,finish=1601333259502589286,duration=6810702,event=setup_filtere:start:0749ef1be:end:0749ef1b:start=1601333259506293173,finish=1601333259522363820,duration=16070647,event=agente:start:062ce89ae:end:062ce89a:start=1601333259526827243,finish=1601333259530165889,duration=3338646,event=check_unsupportede:start:09507f81_infoBuild system information
Build language: node_js
Build dist: xenial
Build id: 731116938
Job id: 731116940
Runtime kernel version: 4.15.0-1077-gcp
travis-build version: 68cdc09f
Build image provisioning date and time
Wed Jun 24 13:36:52 UTC 2020
Operating System Details
Distributor ID:Ubuntu
Description:Ubuntu 16.04.6 LTS
Release:16.04
Codename:xenial
Systemd Version
systemd 229
Cookbooks Version
3f92a99 https://github.com/travis-ci/travis-cookbooks/tree/3f92a99
git version
git version 2.27.0
bash version
GNU bash, version 4.3.48(1)-release (x86_64-pc-linux-gnu)
gcc version
gcc (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609
docker version
Client:
 Version:           18.06.0-ce
 API version:       1.38
 Go version:        go1.10.3
 Git commit:        0ffa825
 Built:             Wed Jul 18 19:11:02 2018
 OS/Arch:           linux/amd64
 Experimental:      false

Server:
 Engine:
  Version:          18.06.0-ce
  API version:      1.38 (minimum version 1.12)
  Go version:       go1.10.3
  Git commit:       0ffa825
  Built:            Wed Jul 18 19:09:05 2018
  OS/Arch:          linux/amd64
  Experimental:     false
clang version
clang version 7.0.0 (tags/RELEASE_700/final)
jq version
jq-1.5
bats version
Bats 0.4.0
shellcheck version
0.7.0
shfmt version
v2.6.3
ccache version
3.2.4
cmake version
cmake version 3.12.4
heroku version
heroku/7.42.1 linux-x64 node-v12.16.2
imagemagick version
Version: ImageMagick 6.8.9-9 Q16 x86_64 2019-11-12 http://www.imagemagick.org
md5deep version
4.4
mercurial version
version 4.8
mysql version
mysql  Ver 14.14 Distrib 5.7.30, for Linux (x86_64) using  EditLine wrapper
openssl version
OpenSSL 1.0.2g  1 Mar 2016
packer version
1.3.3
postgresql client version
psql (PostgreSQL) 10.13 (Ubuntu 10.13-1.pgdg16.04+1)
ragel version
Ragel State Machine Compiler version 6.8 Feb 2013
sudo version
1.8.16
gzip version
gzip 1.6
zip version
Zip 3.0
vim version
VIM - Vi IMproved 7.4 (2013 Aug 10, compiled Mar 18 2020 14:06:17)
iptables version
iptables v1.6.0
curl version
curl 7.47.0 (x86_64-pc-linux-gnu) libcurl/7.47.0 GnuTLS/3.4.10 zlib/1.2.8 libidn/1.32 librtmp/2.3
wget version
GNU Wget 1.17.1 built on linux-gnu.
rsync version
rsync  version 3.1.1  protocol version 31
gimme version
v1.5.4
nvm version
0.35.3
perlbrew version
/home/travis/perl5/perlbrew/bin/perlbrew  - App::perlbrew/0.88
phpenv version
rbenv 1.1.2-30-gc879cb0
rvm version
rvm 1.29.10 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io]
default ruby version
ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]
CouchDB version
couchdb 1.6.1
ElasticSearch version
5.5.0
Installed Firefox version
firefox 63.0.1
MongoDB version
MongoDB 4.0.19
PhantomJS version
2.1.1
Pre-installed PostgreSQL versions
9.4.26
9.5.22
9.6.18
Redis version
redis-server 6.0.5
Pre-installed Go versions
1.11.1
ant version
Apache Ant(TM) version 1.9.6 compiled on July 20 2018
mvn version
Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)
gradle version
Gradle 5.1.1!
lein version
Leiningen 2.9.3 on Java 11.0.2 OpenJDK 64-Bit Server VM
Pre-installed Node.js versions
v10.21.0
v11.0.0
v12.18.1
v4.9.1
v6.17.1
v8.12.0
v8.17.0
v8.9
phpenv versions
  system
  5.6
  5.6.40
  7.1
  7.1.27
  7.2
* 7.2.15 (set by /home/travis/.phpenv/version)
  hhvm
  hhvm-stable
composer --version
Composer version 1.8.4 2019-02-11 10:52:10
Pre-installed Ruby versions
ruby-2.3.8
ruby-2.4.5
ruby-2.5.3
travis_fold:end:system_infoe:end:09507f81:start=1601333259533946931,finish=1601333259545435130,duration=11488199,event=show_system_infoe:start:0013cc5ce:end:0013cc5c:start=1601333259554414879,finish=1601333259572287117,duration=17872238,event=rm_riak_sourcee:start:0b5d2478e:end:0b5d2478:start=1601333259577244026,finish=1601333259583766453,duration=6522427,event=fix_rwky_redise:start:05721030e:end:05721030:start=1601333259586905967,finish=1601333260081844519,duration=494938552,event=wait_for_networke:start:08f104a8e:end:08f104a8:start=1601333260085817614,finish=1601333260330140125,duration=244322511,event=update_apt_keyse:start:0f76706ae:end:0f76706a:start=1601333260335050207,finish=1601333260389375891,duration=54325684,event=fix_hhvm_sourcee:start:07aafd4ae:end:07aafd4a:start=1601333260393919811,finish=1601333260397745457,duration=3825646,event=update_mongo_arche:start:17f3c2b9e:end:17f3c2b9:start=1601333260404671246,finish=1601333260447899160,duration=43227914,event=fix_sudo_enabled_trustye:start:1c391bede:end:1c391bed:start=1601333260455377191,finish=1601333260458539122,duration=3161931,event=update_glibce:start:04d83de5e:end:04d83de5:start=1601333260464727017,finish=1601333260474236606,duration=9509589,event=clean_up_pathe:start:0129b9a0e:end:0129b9a0:start=1601333260479822447,finish=1601333260489019995,duration=9197548,event=fix_resolv_confe:start:09b4dbb1e:end:09b4dbb1:start=1601333260493835227,finish=1601333260504108891,duration=10273664,event=fix_etc_hostse:start:15148260e:end:15148260:start=1601333260509489186,finish=1601333260522624480,duration=13135294,event=fix_mvn_settings_xmle:start:0026f6c4e:end:0026f6c4:start=1601333260528789078,finish=1601333260538851998,duration=10062920,event=no_ipv6_localhoste:start:11ad7597e:end:11ad7597:start=1601333260545450529,finish=1601333260548656135,duration=3205606,event=fix_etc_mavenrce:start:3600376ae:end:3600376a:start=1601333260554994359,finish=1601333260558890243,duration=3895884,event=fix_wwdr_certificatee:start:2198d0b1e:end:2198d0b1:start=1601333260565566483,finish=1601333260591610637,duration=26044154,event=put_localhost_firste:start:12f1a50be:end:12f1a50b:start=1601333260595994104,finish=1601333260601145881,duration=5151777,event=home_pathse:start:0058e2fae:end:0058e2fa:start=1601333260606427857,finish=1601333260621219780,duration=14791923,event=disable_initramfse:start:102c8402e:end:102c8402:start=1601333260625629351,finish=1601333261088155186,duration=462525835,event=disable_ssh_roaminge:start:12d751fae:end:12d751fa:start=1601333261092659473,finish=1601333261095726545,duration=3067072,event=debug_toolse:start:01c5b0bfe:end:01c5b0bf:start=1601333261099822907,finish=1601333261103570061,duration=3747154,event=uninstall_oclinte:start:029ebbb8e:end:029ebbb8:start=1601333261107647609,finish=1601333261111331724,duration=3684115,event=rvm_usee:start:04a75e9ae:end:04a75e9a:start=1601333261117719073,finish=1601333261127049932,duration=9330859,event=rm_etc_boto_cfge:start:1fe3e6e8e:end:1fe3e6e8:start=1601333261132327790,finish=1601333261136664488,duration=4336698,event=rm_oraclejdk8_symlinke:start:3866e8f0e:end:3866e8f0:start=1601333261143201398,finish=1601333261250811767,duration=107610369,event=enable_i386e:start:005792a6e:end:005792a6:start=1601333261255286029,finish=1601333261262021715,duration=6735686,event=update_rubygemse:start:2cd22eaee:end:2cd22eae:start=1601333261268121061,finish=1601333262112388649,duration=844267588,event=ensure_path_componentse:start:05b246f2e:end:05b246f2:start=1601333262116795626,finish=1601333262120082495,duration=3286869,event=redefine_curle:start:10a64cede:end:10a64ced:start=1601333262126252228,finish=1601333262260209555,duration=133957327,event=nonblock_pipee:start:1a44a8bce:end:1a44a8bc:start=1601333262264599324,finish=1601333268297994311,duration=6033394987,event=apt_get_updatee:start:0a72b28ee:end:0a72b28e:start=1601333268302306662,finish=1601333268304795288,duration=2488626,event=deprecate_xcode_64e:start:08c06da6e:end:08c06da6:start=1601333268309209183,finish=1601333271219184581,duration=2909975398,event=update_herokue:start:04c535c3e:end:04c535c3:start=1601333271223973337,finish=1601333271226764309,duration=2790972,event=shell_session_updatee:start:03d02480tutue:end:03d02480:start=1601333271231674890,finish=1601333273702788328,duration=2471113438,event=set_docker_mtue:start:30726a8ce:end:30726a8c:start=1601333273706517113,finish=1601333273773523025,duration=67005912,event=resolvconfe:start:0fd6f09ee:end:0fd6f09e:start=1601333273781989430,finish=1601333273946677744,duration=164688314,event=maven_central_mirrore:start:00544a46e:end:00544a46:start=1601333273951313983,finish=1601333274047906480,duration=96592497,event=maven_httpse:start:0711e01de:start:1a5e9a05ctl start docker
travis_time:end:1a5e9a05:start=1601333274057023450,finish=1601333274069036444,duration=12012994,event=preparee:end:1a5e9a05:start=1601333274057023450,finish=1601333277074733916,duration=3017710466,event=servicese:start:0585f33ae:end:0585f33a:start=1601333277080113370,finish=1601333277083098542,duration=2985172,event=fix_ps4e:start:2462d8ade:start:00c44500it https://github.com/ether/[secure].git ether/[secure]
Cloning into 'ether/[secure]'...
travis_time:end:00c44500:start=1601333277090632332,finish=1601333277992534843,duration=901902511,event=checkoute:end:00c44500:start=1601333277090632332,finish=1601333278060950512,duration=970318180,event=checkoute:start:0865d238Setting environment variables from repository settings
$ export SAUCE_USERNAME=[secure]
$ export SAUCE_ACCESS_KEY=[secure]

travis_time:end:0865d238:start=1601333278065995560,finish=1601333278077592132,duration=11596572,event=env.installe:start:30e22b85 install lts/*
Downloading and installing node v12.18.4...
Downloading https://nodejs.org/dist/v12.18.4/node-v12.18.4-linux-x64.tar.xz...
Computing checksum with sha256sum
Checksums matched!
Now using node v12.18.4 (npm v6.14.6)
travis_time:end:30e22b85:start=1601333278608018036,finish=1601333281384982700,duration=2776964664,event=setup.install --version
6.14.6
$ nvm --version
0.36.0

travis_fold:start:install.1e:start:01d26a28e:end:01d26a28:start=1601333281953589289,finish=1601333282297426697,duration=343837408,event=installe:start:15fddabc .
Sending build context to Docker daemon  8.308MB
Step 1/15 : FROM node:10-buster-slim
10-buster-slim: Pulling from library/node
d121f8d1c412: Pulling fs layer
3a54a24e4e59: Pulling fs layer
d529751e49be: Pulling fs layer
4e4e747e0ab9: Pulling fs layer
2cc64762bc94: Pulling fs layer
4e4e747e0ab9: Waiting
2cc64762bc94: Waiting
3a54a24e4e59: Verifying Checksum
3a54a24e4e59: Download complete
4e4e747e0ab9: Verifying Checksum
4e4e747e0ab9: Download complete
d529751e49be: Verifying Checksum
d529751e49be: Download complete
d121f8d1c412: Verifying Checksum
d121f8d1c412: Download complete
2cc64762bc94: Verifying Checksum
2cc64762bc94: Download complete
d121f8d1c412: Pull complete
3a54a24e4e59: Pull complete
d529751e49be: Pull complete
4e4e747e0ab9: Pull complete
2cc64762bc94: Pull complete
Digest: sha256:f825466cc5af397f6559649c2050c0632fa3598645d76fe0794b39eb90858df0
Status: Downloaded newer image for node:10-buster-slim
 ---> 2f85514a2182
Step 2/15 : LABEL maintainer="Etherpad team, https://github.com/ether/[secure]"
 ---> Running in bc9b7b9d343f
Removing intermediate container bc9b7b9d343f
 ---> 24b4602a6b1f
Step 3/15 : ARG ETHERPAD_PLUGINS=
 ---> Running in 52ce1c251d23
Removing intermediate container 52ce1c251d23
 ---> 64ebd0fe0df3
Step 4/15 : ENV NODE_ENV=production
 ---> Running in 311ca51fd603
Removing intermediate container 311ca51fd603
 ---> ab12ecf97c16
Step 5/15 : RUN useradd --uid 5001 --create-home etherpad
 ---> Running in 0dbc577e7099
Removing intermediate container 0dbc577e7099
 ---> 57c9721ffbd4
Step 6/15 : RUN mkdir /opt/[secure] && chown etherpad:0 /opt/[secure]
 ---> Running in 8a20a2dca3c7
Removing intermediate container 8a20a2dca3c7
 ---> 4b55ae6e0695
Step 7/15 : USER etherpad
 ---> Running in 615325223c2d
Removing intermediate container 615325223c2d
 ---> 3f033fa5b8df
Step 8/15 : WORKDIR /opt/[secure]
 ---> Running in 6bef702a3a91
Removing intermediate container 6bef702a3a91
 ---> 8b55b0d980b8
Step 9/15 : COPY --chown=etherpad:0 ./ ./
 ---> c36d3134cc99
Step 10/15 : RUN bin/installDeps.sh && rm -rf ~/.npm/_cacache
 ---> Running in 921b7ed730f3
Copy the settings template to settings.json...
Ensure that all dependencies are up to date...  If this is the first time you have run Etherpad please be patient.
added 514 packages in 7.044s
Clearing minified cache...
Removing intermediate container 921b7ed730f3
 ---> f11447ae80e5
Step 11/15 : RUN for PLUGIN_NAME in ${ETHERPAD_PLUGINS}; do npm install "${PLUGIN_NAME}" || exit 1; done
 ---> Running in b7d2680b64ed
Removing intermediate container b7d2680b64ed
 ---> 0e408c5d6e55
Step 12/15 : COPY --chown=etherpad:0 ./settings.json.docker /opt/[secure]/settings.json
 ---> 9ed1ebe98f42
Step 13/15 : RUN chmod -R g=u .
 ---> Running in 2bde6f45b42c
Removing intermediate container 2bde6f45b42c
 ---> b2fe1d63ae2a
Step 14/15 : EXPOSE 9001
 ---> Running in 0b8149b02dbd
Removing intermediate container 0b8149b02dbd
 ---> 5b3c2cef480e
Step 15/15 : CMD ["node", "node_modules/ep_[secure]/node/server.js"]
 ---> Running in 675fa93182d3
Removing intermediate container 675fa93182d3
 ---> 489a4f431ff9
Successfully built 489a4f431ff9
Successfully tagged epl-debian-slim:latest
travis_time:end:15fddabc:start=1601333282302142412,finish=1601333337209552747,duration=54907410335,event=installe:start:06cbe627it/Dockerfile.nginx -t nginx-latest .
Sending build context to Docker daemon  8.306MB
Step 1/2 : FROM nginx
latest: Pulling from library/nginx
d121f8d1c412: Already exists
ebd81fc8c071: Pulling fs layer
655316c160af: Pulling fs layer
d15953c0e0f8: Pulling fs layer
2ee525c5c3cc: Pulling fs layer
2ee525c5c3cc: Waiting
d15953c0e0f8: Verifying Checksum
d15953c0e0f8: Download complete
655316c160af: Verifying Checksum
655316c160af: Download complete
2ee525c5c3cc: Verifying Checksum
2ee525c5c3cc: Download complete
ebd81fc8c071: Verifying Checksum
ebd81fc8c071: Download complete
ebd81fc8c071: Pull complete
655316c160af: Pull complete
d15953c0e0f8: Pull complete
2ee525c5c3cc: Pull complete
Digest: sha256:794275d96b4ab96eeb954728a7bf11156570e8372ecd5ed0cbc7280313a27d19
Status: Downloaded newer image for nginx:latest
 ---> 7e4d58f0e5f3
Step 2/2 : COPY ./tests/ratelimit/nginx.conf /etc/nginx/nginx.conf
 ---> 4ca88abbe513
Successfully built 4ca88abbe513
Successfully tagged nginx-latest:latest
travis_time:end:06cbe627:start=1601333337216186722,finish=1601333340286694746,duration=3070508024,event=installe:start:14d4f408it/Dockerfile.anotherip -t anotherip .
Sending build context to Docker daemon  8.306MB
Step 1/5 : FROM node:alpine3.12
alpine3.12: Pulling from library/node
df20fa9351a1: Pulling fs layer
e58381670ca6: Pulling fs layer
26c16fac282c: Pulling fs layer
4c9757a60dc0: Pulling fs layer
4c9757a60dc0: Waiting
df20fa9351a1: Verifying Checksum
df20fa9351a1: Download complete
e58381670ca6: Verifying Checksum
e58381670ca6: Download complete
4c9757a60dc0: Verifying Checksum
4c9757a60dc0: Download complete
df20fa9351a1: Pull complete
26c16fac282c: Verifying Checksum
26c16fac282c: Download complete
e58381670ca6: Pull complete
26c16fac282c: Pull complete
4c9757a60dc0: Pull complete
Digest: sha256:6b909eef76f5bd42f20f5e62e241e7e34ca9b58b5cb1bb54146ad0e524fca5b9
Status: Downloaded newer image for node:alpine3.12
 ---> 75553673d3f9
Step 2/5 : RUN apk add --no-cache bash
 ---> Running in 6b66eb19eaf2
fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz
(1/4) Installing ncurses-terminfo-base (6.2_p20200523-r0)
(2/4) Installing ncurses-libs (6.2_p20200523-r0)
(3/4) Installing readline (8.0.4-r0)
(4/4) Installing bash (5.0.17-r0)
Executing bash-5.0.17-r0.post-install
Executing busybox-1.31.1-r16.trigger
OK: 9 MiB in 20 packages
Removing intermediate container 6b66eb19eaf2
 ---> 5bc911508c83
Step 3/5 : WORKDIR /tmp
 ---> Running in 47140e5baa26
Removing intermediate container 47140e5baa26
 ---> 8a7ef699c668
Step 4/5 : RUN npm i etherpad-cli-client
 ---> Running in 0d34038efe7b
npm WARN saveError ENOENT: no such file or directory, open '/tmp/package.json'
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN enoent ENOENT: no such file or directory, open '/tmp/package.json'
npm WARN tmp No description
npm WARN tmp No repository field.
npm WARN tmp No README data
npm WARN tmp No license field.

+ etherpad-cli-client@0.0.9
added 33 packages from 25 contributors and audited 33 packages in 1.838s
found 0 vulnerabilities

Removing intermediate container 0d34038efe7b
 ---> 1f765b6946d1
Step 5/5 : COPY ./tests/ratelimit/send_changesets.js /tmp/send_changesets.js
 ---> f987b4170151
Successfully built f987b4170151
Successfully tagged anotherip:latest
travis_time:end:14d4f408:start=1601333340291774640,finish=1601333349557054192,duration=9265279552,event=installe:start:0944c6f7 --network ep_net --ip 172.23.42.1 -d nginx-latest
abf736eb921f9f5cb97daf512d04fa67189d62113db9c6690774b487192aea46
travis_time:end:0944c6f7:start=1601333349561987582,finish=1601333350327904243,duration=765916661,event=installe:start:11401004e etherpad-docker -p 9000:9001 --rm --network ep_net --ip 172.23.42.2 -e 'TRUST_PROXY=true' epl-debian-slim &
travis_time:end:11401004:start=1601333350339499677,finish=1601333350346020252,duration=6520575,event=installe:start:0f6a3174 --network ep_net --ip 172.23.42.3 --name anotherip -dt anotherip
810d3680dc01d3cffb3280f3fcb0ca88a812f22c4d39d3b0ab9e04818a252e80
travis_time:end:0f6a3174:start=1601333350355828075,finish=1601333351290968169,duration=935140094,event=installe:start:00e0257cplate to settings.json...
Ensure that all dependencies are up to date...  If this is the first time you have run Etherpad please be patient.
[2020-09-28 22:49:12.464] [DEBUG] console - Running on Node v10.22.1 (minimum required Node version: 10.13.0)
[2020-09-28 22:49:12.689] [INFO] console - All relative paths will be interpreted relative to the identified Etherpad base dir: /opt/[secure]
[2020-09-28 22:49:12.696] [INFO] console - Random string used for versioning assets: de2adc9c
[2020-09-28 22:49:12.697] [DEBUG] AbsolutePaths - Relative path "settings.json" can be rewritten to "/opt/[secure]/settings.json"
[2020-09-28 22:49:12.697] [DEBUG] AbsolutePaths - Relative path "credentials.json" can be rewritten to "/opt/[secure]/credentials.json"
[2020-09-28 22:49:12.723] [INFO] console - settings loaded from: /opt/[secure]/settings.json
[2020-09-28 22:49:12.724] [DEBUG] console - Environment variable "TITLE" not found for configuration key "title". Falling back to default value.
[2020-09-28 22:49:12.725] [DEBUG] console - Environment variable "FAVICON" not found for configuration key "favicon". Falling back to default value.
[2020-09-28 22:49:12.725] [DEBUG] console - Environment variable "SKIN_NAME" not found for configuration key "skinName". Falling back to default value.
[2020-09-28 22:49:12.725] [DEBUG] console - Environment variable "SKIN_VARIANTS" not found for configuration key "skinVariants". Falling back to default value.
[2020-09-28 22:49:12.725] [DEBUG] console - Environment variable "IP" not found for configuration key "ip". Falling back to default value.
[2020-09-28 22:49:12.726] [DEBUG] console - Environment variable "PORT" not found for configuration key "port". Falling back to default value.
[2020-09-28 22:49:12.726] [DEBUG] console - Environment variable "SHOW_SETTINGS_IN_ADMIN_PAGE" not found for configuration key "showSettingsInAdminPage". Falling back to default value.
[2020-09-28 22:49:12.726] [DEBUG] console - Environment variable "DB_TYPE" not found for configuration key "dbType". Falling back to default value.
[2020-09-28 22:49:12.727] [WARN] console - Environment variable "DB_HOST" does not contain any value for configuration key "host", and no default was given. Returning null.
[2020-09-28 22:49:12.727] [WARN] console - Environment variable "DB_PORT" does not contain any value for configuration key "port", and no default was given. Returning null.
[2020-09-28 22:49:12.727] [WARN] console - Environment variable "DB_NAME" does not contain any value for configuration key "database", and no default was given. Returning null.
[2020-09-28 22:49:12.727] [WARN] console - Environment variable "DB_USER" does not contain any value for configuration key "user", and no default was given. Returning null.
[2020-09-28 22:49:12.727] [WARN] console - Environment variable "DB_PASS" does not contain any value for configuration key "password", and no default was given. Returning null.
[2020-09-28 22:49:12.728] [WARN] console - Environment variable "DB_CHARSET" does not contain any value for configuration key "charset", and no default was given. Returning null.
[2020-09-28 22:49:12.728] [DEBUG] console - Environment variable "DB_FILENAME" not found for configuration key "filename". Falling back to default value.
[2020-09-28 22:49:12.728] [DEBUG] console - Environment variable "DEFAULT_PAD_TEXT" not found for configuration key "defaultPadText". Falling back to default value.
[2020-09-28 22:49:12.732] [DEBUG] console - Environment variable "PAD_OPTIONS_NO_COLORS" not found for configuration key "noColors". Falling back to default value.
[2020-09-28 22:49:12.732] [DEBUG] console - Environment variable "PAD_OPTIONS_SHOW_CONTROLS" not found for configuration key "showControls". Falling back to default value.
[2020-09-28 22:49:12.733] [DEBUG] console - Environment variable "PAD_OPTIONS_SHOW_CHAT" not found for configuration key "showChat". Falling back to default value.
[2020-09-28 22:49:12.733] [DEBUG] console - Environment variable "PAD_OPTIONS_SHOW_LINE_NUMBERS" not found for configuration key "showLineNumbers". Falling back to default value.
[2020-09-28 22:49:12.733] [DEBUG] console - Environment variable "PAD_OPTIONS_USE_MONOSPACE_FONT" not found for configuration key "useMonospaceFont". Falling back to default value.
[2020-09-28 22:49:12.733] [DEBUG] console - Environment variable "PAD_OPTIONS_USER_NAME" not found for configuration key "userName". Falling back to default value.
[2020-09-28 22:49:12.734] [DEBUG] console - Environment variable "PAD_OPTIONS_USER_COLOR" not found for configuration key "userColor". Falling back to default value.
[2020-09-28 22:49:12.734] [DEBUG] console - Environment variable "PAD_OPTIONS_RTL" not found for configuration key "rtl". Falling back to default value.
[2020-09-28 22:49:12.734] [DEBUG] console - Environment variable "PAD_OPTIONS_ALWAYS_SHOW_CHAT" not found for configuration key "alwaysShowChat". Falling back to default value.
[2020-09-28 22:49:12.734] [DEBUG] console - Environment variable "PAD_OPTIONS_CHAT_AND_USERS" not found for configuration key "chatAndUsers". Falling back to default value.
[2020-09-28 22:49:12.735] [DEBUG] console - Environment variable "PAD_OPTIONS_LANG" not found for configuration key "lang". Falling back to default value.
[2020-09-28 22:49:12.735] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_ALT_F9" not found for configuration key "altF9". Falling back to default value.
[2020-09-28 22:49:12.735] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_ALT_C" not found for configuration key "altC". Falling back to default value.
[2020-09-28 22:49:12.735] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_SHIFT_2" not found for configuration key "cmdShift2". Falling back to default value.
[2020-09-28 22:49:12.735] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_DELETE" not found for configuration key "delete". Falling back to default value.
[2020-09-28 22:49:12.736] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_RETURN" not found for configuration key "return". Falling back to default value.
[2020-09-28 22:49:12.736] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_ESC" not found for configuration key "esc". Falling back to default value.
[2020-09-28 22:49:12.736] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_S" not found for configuration key "cmdS". Falling back to default value.
[2020-09-28 22:49:12.736] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_TAB" not found for configuration key "tab". Falling back to default value.
[2020-09-28 22:49:12.737] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_Z" not found for configuration key "cmdZ". Falling back to default value.
[2020-09-28 22:49:12.737] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_Y" not found for configuration key "cmdY". Falling back to default value.
[2020-09-28 22:49:12.737] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_I" not found for configuration key "cmdI". Falling back to default value.
[2020-09-28 22:49:12.737] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_B" not found for configuration key "cmdB". Falling back to default value.
[2020-09-28 22:49:12.737] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_U" not found for configuration key "cmdU". Falling back to default value.
[2020-09-28 22:49:12.738] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_5" not found for configuration key "cmd5". Falling back to default value.
[2020-09-28 22:49:12.738] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_SHIFT_L" not found for configuration key "cmdShiftL". Falling back to default value.
[2020-09-28 22:49:12.738] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_SHIFT_N" not found for configuration key "cmdShiftN". Falling back to default value.
[2020-09-28 22:49:12.738] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_SHIFT_1" not found for configuration key "cmdShift1". Falling back to default value.
[2020-09-28 22:49:12.739] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_SHIFT_C" not found for configuration key "cmdShiftC". Falling back to default value.
[2020-09-28 22:49:12.739] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CMD_H" not found for configuration key "cmdH". Falling back to default value.
[2020-09-28 22:49:12.739] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_CTRL_HOME" not found for configuration key "ctrlHome". Falling back to default value.
[2020-09-28 22:49:12.739] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_PAGE_UP" not found for configuration key "pageUp". Falling back to default value.
[2020-09-28 22:49:12.740] [DEBUG] console - Environment variable "PAD_SHORTCUTS_ENABLED_PAGE_DOWN" not found for configuration key "pageDown". Falling back to default value.
[2020-09-28 22:49:12.740] [DEBUG] console - Environment variable "SUPPRESS_ERRORS_IN_PAD_TEXT" not found for configuration key "suppressErrorsInPadText". Falling back to default value.
[2020-09-28 22:49:12.740] [DEBUG] console - Environment variable "REQUIRE_SESSION" not found for configuration key "requireSession". Falling back to default value.
[2020-09-28 22:49:12.740] [DEBUG] console - Environment variable "EDIT_ONLY" not found for configuration key "editOnly". Falling back to default value.
[2020-09-28 22:49:12.740] [DEBUG] console - Environment variable "SESSION_NO_PASSWORD" not found for configuration key "sessionNoPassword". Falling back to default value.
[2020-09-28 22:49:12.741] [DEBUG] console - Environment variable "MINIFY" not found for configuration key "minify". Falling back to default value.
[2020-09-28 22:49:12.741] [DEBUG] console - Environment variable "MAX_AGE" not found for configuration key "maxAge". Falling back to default value.
[2020-09-28 22:49:12.741] [WARN] console - Environment variable "ABIWORD" does not contain any value for configuration key "abiword", and no default was given. Returning null.
[2020-09-28 22:49:12.741] [WARN] console - Environment variable "SOFFICE" does not contain any value for configuration key "soffice", and no default was given. Returning null.
[2020-09-28 22:49:12.741] [WARN] console - Environment variable "TIDY_HTML" does not contain any value for configuration key "tidyHtml", and no default was given. Returning null.
[2020-09-28 22:49:12.742] [DEBUG] console - Environment variable "ALLOW_UNKNOWN_FILE_ENDS" not found for configuration key "allowUnknownFileEnds". Falling back to default value.
[2020-09-28 22:49:12.742] [DEBUG] console - Environment variable "REQUIRE_AUTHENTICATION" not found for configuration key "requireAuthentication". Falling back to default value.
[2020-09-28 22:49:12.742] [DEBUG] console - Environment variable "REQUIRE_AUTHORIZATION" not found for configuration key "requireAuthorization". Falling back to default value.
[2020-09-28 22:49:12.742] [DEBUG] console - Configuration key "trustProxy" will be read from environment variable "TRUST_PROXY"
[2020-09-28 22:49:12.742] [DEBUG] console - Environment variable "DISABLE_IP_LOGGING" not found for configuration key "disableIPlogging". Falling back to default value.
[2020-09-28 22:49:12.743] [DEBUG] console - Environment variable "AUTOMATIC_RECONNECTION_TIMEOUT" not found for configuration key "automaticReconnectionTimeout". Falling back to default value.
[2020-09-28 22:49:12.743] [DEBUG] console - Environment variable "FOCUS_LINE_PERCENTAGE_ABOVE" not found for configuration key "editionAboveViewport". Falling back to default value.
[2020-09-28 22:49:12.743] [DEBUG] console - Environment variable "FOCUS_LINE_PERCENTAGE_BELOW" not found for configuration key "editionBelowViewport". Falling back to default value.
[2020-09-28 22:49:12.743] [DEBUG] console - Environment variable "FOCUS_LINE_DURATION" not found for configuration key "duration". Falling back to default value.
[2020-09-28 22:49:12.744] [DEBUG] console - Environment variable "FOCUS_LINE_CARET_SCROLL" not found for configuration key "scrollWhenCaretIsInTheLastLineOfViewport". Falling back to default value.
[2020-09-28 22:49:12.744] [DEBUG] console - Environment variable "FOCUS_LINE_PERCENTAGE_ARROW_UP" not found for configuration key "percentageToScrollWhenUserPressesArrowUp". Falling back to default value.
[2020-09-28 22:49:12.744] [WARN] console - Environment variable "ADMIN_PASSWORD" does not contain any value for configuration key "password", and no default was given. Returning null.
[2020-09-28 22:49:12.744] [WARN] console - Environment variable "USER_PASSWORD" does not contain any value for configuration key "password", and no default was given. Returning null.
[2020-09-28 22:49:12.745] [DEBUG] console - Environment variable "LOAD_TEST" not found for configuration key "loadTest". Falling back to default value.
[2020-09-28 22:49:12.745] [DEBUG] console - Environment variable "IMPORT_EXPORT_RATE_LIMIT_WINDOW" not found for configuration key "windowMs". Falling back to default value.
[2020-09-28 22:49:12.745] [DEBUG] console - Environment variable "IMPORT_EXPORT_MAX_REQ_PER_IP" not found for configuration key "max". Falling back to default value.
[2020-09-28 22:49:12.745] [DEBUG] console - Environment variable "IMPORT_MAX_FILE_SIZE" not found for configuration key "importMaxFileSize". Falling back to default value.
[2020-09-28 22:49:12.745] [DEBUG] console - Environment variable "EXPOSE_VERSION" not found for configuration key "exposeVersion". Falling back to default value.
[2020-09-28 22:49:12.746] [DEBUG] console - Environment variable "LOGLEVEL" not found for configuration key "loglevel". Falling back to default value.
[2020-09-28 22:49:12.747] [INFO] console - No credentials file found in /opt/[secure]/credentials.json. Ignoring.
[2020-09-28 22:49:12.749] [INFO] console - Using skin "colibris" in dir: /opt/[secure]/src/static/skins/colibris
[2020-09-28 22:49:12.749] [WARN] console - Removing user "admin", because its "password" is null.
[2020-09-28 22:49:12.749] [WARN] console - Removing user "user", because its "password" is null.
[2020-09-28 22:49:12.750] [INFO] console - Session key file "/opt/[secure]/SESSIONKEY.txt" not found. Creating with random contents.
[2020-09-28 22:49:12.752] [WARN] console - DirtyDB is used. This is fine for testing but not recommended for production. File location: /opt/[secure]/var/dirty.db
[2020-09-28 22:49:14.817] [INFO] APIHandler - Api key file "/opt/[secure]/APIKEY.txt" not found. Creating with random contents.
[2020-09-28 22:49:15.094] [INFO] console - Installed plugins: 
[2020-09-28 22:49:15.108] [INFO] console - Report bugs at https://github.com/ether/[secure]/issues
[2020-09-28 22:49:15.126] [WARN] console - Can't get git version for server header
ENOENT: no such file or directory, open '/opt/[secure]/.git/bb1b4910d253cf590aeea2573acec5c186e'
[2020-09-28 22:49:15.126] [WARN] console - Can't get git version for server header
ENOENT: no such file or directory, open '/opt/[secure]/.git/bb1b4910d253cf590aeea2573acec5c186e'
[2020-09-28 22:49:15.127] [INFO] console - Your Etherpad version is 1.8.6 ()
Node worker_threads not available. Trying to fall back to tiny-worker polyfill...
Node worker_threads not available. Trying to fall back to tiny-worker polyfill...
[2020-09-28 22:49:21.555] [INFO] console - You can access your Etherpad instance at http://0.0.0.0:9001/
[2020-09-28 22:49:21.555] [WARN] console - Admin username and password not set in settings.json.  To access admin please uncomment and edit 'users' in settings.json

> wd@1.12.1 install /home/travis/build/ether/[secure]/src/node_modules/wd
> node scripts/build-browser-scripts

added 700 packages in 12.522s
Clearing minified cache...
travis_time:end:00e0257c:start=1601333351299319633,finish=1601333364441631685,duration=13142312052,event=installe:start:2fa4a2f2e runtime customizations are supported (see the
 * documentation).
 *
 * If you need more control, edit this file and rebuild the container.
 */

/*
 * This file must be valid JSON. But comments are allowed
 *
 * Please edit settings.json, not settings.json.template
 *
 * Please note that starting from Etherpad 1.6.0 you can store DB credentials in
 * a separate file (credentials.json).
 *
 *
 * ENVIRONMENT VARIABLE SUBSTITUTION
 * =================================
 *
 * All the configuration values can be read from environment variables using the
 * syntax "${ENV_VAR}" or "${ENV_VAR:default_value}".
 *
 * This is useful, for example, when running in a Docker container.
 *
 * EXAMPLE:
 *    "port":     "${PORT:9001}"
 *    "minify":   "${MINIFY}"
 *    "skinName": "${SKIN_NAME:colibris}"
 *
 * Would read the configuration values for those items from the environment
 * variables PORT, MINIFY and SKIN_NAME.
 *
 * If PORT and SKIN_NAME variables were not defined, the default values 9001 and
 * "colibris" would be used.
 * The configuration value "minify", on the other hand, does not have a
 * designated default value. Thus, if the environment variable MINIFY were
 * undefined, "minify" would be null.
 *
 * REMARKS:
 * 1) please note that variable substitution always needs to be quoted.
 *
 *    "port":     9001,            <-- Literal values. When not using
 *    "minify":   false                substitution, only strings must be
 *    "skinName": "colibris"           quoted. Booleans and numbers must not.
 *
 *    "port":     "${PORT:9001}"   <-- CORRECT: if you want to use a variable
 *    "minify":   "${MINIFY:true}"     substitution, put quotes around its name,
 *    "skinName": "${SKIN_NAME}"       even if the required value is a number or
 *                                     a boolean.
 *                                     Etherpad will take care of rewriting it
 *                                     to the proper type if necessary.
 *
 *    "port":     ${PORT:9001}     <-- ERROR: this is not valid json. Quotes
 *    "minify":   ${MINIFY}            around variable names are missing.
 *    "skinName": ${SKIN_NAME}
 *
 * 2) Beware of undefined variables and default values: nulls and empty strings
 *    are different!
 *
 *    This is particularly important for user's passwords (see the relevant
 *    section):
 *
 *    "password": "${PASSW}"  // if PASSW is not defined would result in password === null
 *    "password": "${PASSW:}" // if PASSW is not defined would result in password === ''
 *
 *    If you want to use an empty value (null) as default value for a variable,
 *    simply do not set it, without putting any colons: "${ABIWORD}".
 *
 * 3) if you want to use newlines in the default value of a string parameter,
 *    use "\n" as usual.
 *
 *    "defaultPadText" : "${DEFAULT_PAD_TEXT}Line 1\nLine 2"
 */
{
  /*
   * Name your instance!
   */
  "title": "${TITLE:Etherpad}",

  /*
   * favicon default name
   * alternatively, set up a fully specified Url to your own favicon
   */
  "favicon": "${FAVICON:favicon.ico}",

  /*
   * Skin name.
   *
   * Its value has to be an existing directory under src/static/skins.
   * You can write your own, or use one of the included ones:
   *
   * - "no-skin":  an empty skin (default). This yields the unmodified,
   *               traditional Etherpad theme.
   * - "colibris": the new experimental skin (since Etherpad 1.8), candidate to
   *               become the default in Etherpad 2.0
   */
  "skinName": "${SKIN_NAME:colibris}",

  /*
   * Skin Variants
   *
   * Use the UI skin variants builder at /p/test#skinvariantsbuilder
   *
   * For the colibris skin only, you can choose how to render the three main
   * containers:
   * - toolbar (top menu with icons)
   * - editor (containing the text of the pad)
   * - background (area outside of editor, mostly visible when using page style)
   *
   * For each of the 3 containers you can choose 4 color combinations:
   * super-light, light, dark, super-dark.
   *
   * For example, to make the toolbar dark, you will include "dark-toolbar" into
   * skinVariants.
   *
   * You can provide multiple skin variants separated by spaces. Default
   * skinVariant is "super-light-toolbar super-light-editor light-background".
   *
   * For the editor container, you can also make it full width by adding
   * "full-width-editor" variant (by default editor is rendered as a page, with
   * a max-width of 900px).
   */
  "skinVariants": "${SKIN_VARIANTS:super-light-toolbar super-light-editor light-background}",

  /*
   * IP and port which Etherpad should bind at.
   *
   * Binding to a Unix socket is also supported: just use an empty string for
   * the ip, and put the full path to the socket in the port parameter.
   *
   * EXAMPLE USING UNIX SOCKET:
   *    "ip": "",                             // <-- has to be an empty string
   *    "port" : "/somepath/etherpad.socket", // <-- path to a Unix socket
   */
  "ip": "${IP:0.0.0.0}",
  "port": "${PORT:9001}",

  /*
   * Option to hide/show the settings.json in admin page.
   *
   * Default option is set to true
   */
  "showSettingsInAdminPage": "${SHOW_SETTINGS_IN_ADMIN_PAGE:true}",

  /*
   * Node native SSL support
   *
   * This is disabled by default.
   * Make sure to have the minimum and correct file access permissions set so
   * that the Etherpad server can access them
   */

  /*
  "ssl" : {
            "key"  : "/path-to-your/epl-server.key",
            "cert" : "/path-to-your/epl-server.crt",
            "ca": ["/path-to-your/epl-intermediate-cert1.crt", "/path-to-your/epl-intermediate-cert2.crt"]
          },
  */

  /*
   * The type of the database.
   *
   * You can choose between many DB drivers, for example: dirty, postgres,
   * sqlite, mysql.
   *
   * You shouldn't use "dirty" for for anything else than testing or
   * development.
   *
   *
   * Database specific settings are dependent on dbType, and go in dbSettings.
   * Remember that since Etherpad 1.6.0 you can also store these informations in
   * credentials.json.
   *
   * For a complete list of the supported drivers, please refer to:
   * https://www.npmjs.com/package/ueberdb2
   */

  "dbType": "${DB_TYPE:dirty}",
  "dbSettings": {
    "host":     "${DB_HOST}",
    "port":     "${DB_PORT}",
    "database": "${DB_NAME}",
    "user":     "${DB_USER}",
    "password": "${DB_PASS}",
    "charset":  "${DB_CHARSET}",
    "filename": "${DB_FILENAME:var/dirty.db}"
  },

  /*
   * The default text of a pad
   */
  "defaultPadText" : "${DEFAULT_PAD_TEXT:Welcome to Etherpad!\n\nThis pad text is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents!\n\nGet involved with Etherpad at https:\/\/etherpad.org\n}",

  /*
   * Default Pad behavior.
   *
   * Change them if you want to override.
   */
  "padOptions": {
    "noColors":         "${PAD_OPTIONS_NO_COLORS:false}",
    "showControls":     "${PAD_OPTIONS_SHOW_CONTROLS:true}",
    "showChat":         "${PAD_OPTIONS_SHOW_CHAT:true}",
    "showLineNumbers":  "${PAD_OPTIONS_SHOW_LINE_NUMBERS:true}",
    "useMonospaceFont": "${PAD_OPTIONS_USE_MONOSPACE_FONT:false}",
    "userName":         "${PAD_OPTIONS_USER_NAME:false}",
    "userColor":        "${PAD_OPTIONS_USER_COLOR:false}",
    "rtl":              "${PAD_OPTIONS_RTL:false}",
    "alwaysShowChat":   "${PAD_OPTIONS_ALWAYS_SHOW_CHAT:false}",
    "chatAndUsers":     "${PAD_OPTIONS_CHAT_AND_USERS:false}",
    "lang":             "${PAD_OPTIONS_LANG:en-gb}"
  },

  /*
   * Pad Shortcut Keys
   */
  "padShortcutEnabled" : {
    "altF9":     "${PAD_SHORTCUTS_ENABLED_ALT_F9:true}",      /* focus on the File Menu and/or editbar */
    "altC":      "${PAD_SHORTCUTS_ENABLED_ALT_C:true}",       /* focus on the Chat window */
    "cmdShift2": "${PAD_SHORTCUTS_ENABLED_CMD_SHIFT_2:true}", /* shows a gritter popup showing a line author */
    "delete":    "${PAD_SHORTCUTS_ENABLED_DELETE:true}",
    "return":    "${PAD_SHORTCUTS_ENABLED_RETURN:true}",
    "esc":       "${PAD_SHORTCUTS_ENABLED_ESC:true}",         /* in mozilla versions 14-19 avoid reconnecting pad */
    "cmdS":      "${PAD_SHORTCUTS_ENABLED_CMD_S:true}",       /* save a revision */
    "tab":       "${PAD_SHORTCUTS_ENABLED_TAB:true}",         /* indent */
    "cmdZ":      "${PAD_SHORTCUTS_ENABLED_CMD_Z:true}",       /* undo/redo */
    "cmdY":      "${PAD_SHORTCUTS_ENABLED_CMD_Y:true}",       /* redo */
    "cmdI":      "${PAD_SHORTCUTS_ENABLED_CMD_I:true}",       /* italic */
    "cmdB":      "${PAD_SHORTCUTS_ENABLED_CMD_B:true}",       /* bold */
    "cmdU":      "${PAD_SHORTCUTS_ENABLED_CMD_U:true}",       /* underline */
    "cmd5":      "${PAD_SHORTCUTS_ENABLED_CMD_5:true}",       /* strike through */
    "cmdShiftL": "${PAD_SHORTCUTS_ENABLED_CMD_SHIFT_L:true}", /* unordered list */
    "cmdShiftN": "${PAD_SHORTCUTS_ENABLED_CMD_SHIFT_N:true}", /* ordered list */
    "cmdShift1": "${PAD_SHORTCUTS_ENABLED_CMD_SHIFT_1:true}", /* ordered list */
    "cmdShiftC": "${PAD_SHORTCUTS_ENABLED_CMD_SHIFT_C:true}", /* clear authorship */
    "cmdH":      "${PAD_SHORTCUTS_ENABLED_CMD_H:true}",       /* backspace */
    "ctrlHome":  "${PAD_SHORTCUTS_ENABLED_CTRL_HOME:true}",   /* scroll to top of pad */
    "pageUp":    "${PAD_SHORTCUTS_ENABLED_PAGE_UP:true}",
    "pageDown":  "${PAD_SHORTCUTS_ENABLED_PAGE_DOWN:true}"
  },

  /*
   * Should we suppress errors from being visible in the default Pad Text?
   */
  "suppressErrorsInPadText": "${SUPPRESS_ERRORS_IN_PAD_TEXT:false}",

  /*
   * If this option is enabled, a user must have a session to access pads.
   * This effectively allows only group pads to be accessed.
   */
  "requireSession": "${REQUIRE_SESSION:false}",

  /*
   * Users may edit pads but not create new ones.
   *
   * Pad creation is only via the API.
   * This applies both to group pads and regular pads.
   */
  "editOnly": "${EDIT_ONLY:false}",

  /*
   * If set to true, those users who have a valid session will automatically be
   * granted access to password protected pads.
   */
  "sessionNoPassword": "${SESSION_NO_PASSWORD:false}",

  /*
   * If true, all css & js will be minified before sending to the client.
   *
   * This will improve the loading performance massively, but makes it difficult
   * to debug the javascript/css
   */
  "minify": "${MINIFY:true}",

  /*
   * How long may clients use served javascript code (in seconds)?
   *
   * Not setting this may cause problems during deployment.
   * Set to 0 to disable caching.
   */
  "maxAge": "${MAX_AGE:21600}", // 60 * 60 * 6 = 6 hours

  /*
   * Absolute path to the Abiword executable.
   *
   * Abiword is needed to get advanced import/export features of pads. Setting
   * it to null disables Abiword and will only allow plain text and HTML
   * import/exports.
   */
  "abiword": "${ABIWORD}",

  /*
   * This is the absolute path to the soffice executable.
   *
   * LibreOffice can be used in lieu of Abiword to export pads.
   * Setting it to null disables LibreOffice exporting.
   */
  "soffice": "${SOFFICE}",

  /*
   * Path to the Tidy executable.
   *
   * Tidy is used to improve the quality of exported pads.
   * Setting it to null disables Tidy.
   */
  "tidyHtml": "${TIDY_HTML}",

  /*
   * Allow import of file types other than the supported ones:
   * txt, doc, docx, rtf, odt, html & htm
   */
  "allowUnknownFileEnds": "${ALLOW_UNKNOWN_FILE_ENDS:true}",

  /*
   * This setting is used if you require authentication of all users.
   *
   * Note: "/admin" always requires authentication.
   */
  "requireAuthentication": "${REQUIRE_AUTHENTICATION:false}",

  /*
   * Require authorization by a module, or a user with is_admin set, see below.
   */
  "requireAuthorization": "${REQUIRE_AUTHORIZATION:false}",

  /*
   * When you use NGINX or another proxy/load-balancer set this to true.
   *
   * This is especially necessary when the reverse proxy performs SSL
   * termination, otherwise the cookies will not have the "secure" flag.
   *
   * The other effect will be that the logs will contain the real client's IP,
   * instead of the reverse proxy's IP.
   */
  "trustProxy": "${TRUST_PROXY:false}",

  /*
   * Privacy: disable IP logging
   */
  "disableIPlogging": "${DISABLE_IP_LOGGING:false}",

  /*
   * Time (in seconds) to automatically reconnect pad when a "Force reconnect"
   * message is shown to user.
   *
   * Set to 0 to disable automatic reconnection.
   */
  "automaticReconnectionTimeout": "${AUTOMATIC_RECONNECTION_TIMEOUT:0}",

  /*
   * By default, when caret is moved out of viewport, it scrolls the minimum
   * height needed to make this line visible.
   */
  "scrollWhenFocusLineIsOutOfViewport": {

    /*
     * Percentage of viewport height to be additionally scrolled.
     *
     * E.g.: use "percentage.editionAboveViewport": 0.5, to place caret line in
     *       the middle of viewport, when user edits a line above of the
     *       viewport
     *
     * Set to 0 to disable extra scrolling
     */
    "percentage": {
      "editionAboveViewport": "${FOCUS_LINE_PERCENTAGE_ABOVE:0}",
      "editionBelowViewport": "${FOCUS_LINE_PERCENTAGE_BELOW:0}"
    },

    /*
     * Time (in milliseconds) used to animate the scroll transition.
     * Set to 0 to disable animation
     */
    "duration": "${FOCUS_LINE_DURATION:0}",

    /*
     * Flag to control if it should scroll when user places the caret in the
     * last line of the viewport
     */
    "scrollWhenCaretIsInTheLastLineOfViewport": "${FOCUS_LINE_CARET_SCROLL:false}",

    /*
     * Percentage of viewport height to be additionally scrolled when user
     * presses arrow up in the line of the top of the viewport.
     *
     * Set to 0 to let the scroll to be handled as default by Etherpad
     */
    "percentageToScrollWhenUserPressesArrowUp": "${FOCUS_LINE_PERCENTAGE_ARROW_UP:0}"
  },

  /*
   * Users for basic authentication.
   *
   * is_admin = true gives access to /admin.
   * If you do not uncomment this, /admin will not be available!
   *
   * WARNING: passwords should not be stored in plaintext in this file.
   *          If you want to mitigate this, please install ep_hash_auth and
   *          follow the section "secure your installation" in README.md
   */

  "users": {
    "admin": {
      // 1) "password" can be replaced with "hash" if you install ep_hash_auth
      // 2) please note that if password is null, the user will not be created
      "password": "${ADMIN_PASSWORD}",
      "is_admin": true
    },
    "user": {
      // 1) "password" can be replaced with "hash" if you install ep_hash_auth
      // 2) please note that if password is null, the user will not be created
      "password": "${USER_PASSWORD}",
      "is_admin": false
    }
  },

  /*
   * Restrict socket.io transport methods
   */
  "socketTransportProtocols" : ["xhr-polling", "jsonp-polling", "htmlfile"],

  /*
   * Allow Load Testing tools to hit the Etherpad Instance.
   *
   * WARNING: this will disable security on the instance.
   */
  "loadTest": "${LOAD_TEST:false}",

  /*
   * Disable indentation on new line when previous line ends with some special
   * chars (':', '[', '(', '{')
   */

  /*
  "indentationOnNewLine": false,
  */

  /*
   * From Etherpad 1.8.3 onwards, import and export of pads is always rate
   * limited.
   *
   * The default is to allow at most 10 requests per IP in a 90 seconds window.
   * After that the import/export request is rejected.
   *
   * See https://github.com/nfriedly/express-rate-limit for more options
   */
  "importExportRateLimiting": {
    // duration of the rate limit window (milliseconds)
    "windowMs": "${IMPORT_EXPORT_RATE_LIMIT_WINDOW:90000}",

    // maximum number of requests per IP to allow during the rate limit window
    "max": "${IMPORT_EXPORT_MAX_REQ_PER_IP:10}"
  },

  /*
   * From Etherpad 1.8.3 onwards, the maximum allowed size for a single imported
   * file is always bounded.
   *
   * File size is specified in bytes. Default is 50 MB.
   */
  "importMaxFileSize": "${IMPORT_MAX_FILE_SIZE:52428800}", // 50 * 1024 * 1024

  /*
   * Toolbar buttons configuration.
   *
   * Uncomment to customize.
   */

  /*
  "toolbar": {
    "left": [
      ["bold", "italic", "underline", "strikethrough"],
      ["orderedlist", "unorderedlist", "indent", "outdent"],
      ["undo", "redo"],
      ["clearauthorship"]
    ],
    "right": [
      ["importexport", "timeslider", "savedrevision"],
      ["settings", "embed"],
      ["showusers"]
    ],
    "timeslider": [
      ["timeslider_export", "timeslider_returnToPad"]
    ]
  },
  */

  /*
   * Expose Etherpad version in the web interface and in the Server http header.
   *
   * Do not enable on production machines.
   */
  "exposeVersion": "${EXPOSE_VERSION:false}",

  /*
   * The log level we are using.
   *
   * Valid values: DEBUG, INFO, WARN, ERROR
   */
  "loglevel": "${LOGLEVEL:INFO}",

  /*
   * Logging configuration. See log4js documentation for further information:
   * https://github.com/nomiddlename/log4js-node
   *
   * You can add as many appenders as you want here.
   */
  "logconfig" :
    { "appenders": [
        { "type": "console"
        //, "category": "access"// only logs pad access
        }

      /*
      , { "type": "file"
      , "filename": "your-log-file-here.log"
      , "maxLogSize": 1024
      , "backups": 3 // how many log files there're gonna be at max
      //, "category": "test" // only log a specific category
        }
      */

      /*
      , { "type": "logLevelFilter"
        , "level": "warn" // filters out all log messages that have a lower level than "error"
        , "appender":
          {  Use whatever appender you want here  }
        }
      */

      /*
      , { "type": "logLevelFilter"
        , "level": "error" // filters out all log messages that have a lower level than "error"
        , "appender":
          { "type": "smtp"
          , "subject": "An error occurred in your EPL instance!"
          , "recipients": "bar@blurdybloop.com, baz@blurdybloop.com"
          , "sendInterval": 300 // 60 * 5 = 5 minutes -- will buffer log messages; set to 0 to send a mail for every message
          , "transport": "SMTP", "SMTP": { // see https://github.com/andris9/Nodemailer#possible-transport-methods
              "host": "smtp.example.com", "port": 465,
              "secureConnection": true,
              "auth": {
                  "user": "foo@example.com",
                  "pass": "bar_foo"
              }
            }
          }
        }
      */

      ]
    }, // logconfig

  /* Override any strings found in locale directories */
  "customLocaleStrings": {}
}
travis_time:end:2fa4a2f2:start=1601333364450199735,finish=1601333364673857612,duration=223657877,event=installe:start:0e244480it && bash testlimits.sh
[2020-09-28 22:49:25.149] [INFO] access - [CREATE] pad:BACKEND_TEST_ratelimit_101ms socket:HfSfgt1dER5CqQU3AAAA IP:172.23.0.1 authorID:a.svpwMUur5zF2iG3n
[2020-09-28 22:49:36.161] [INFO] access - [LEAVE] pad:BACKEND_TEST_ratelimit_101ms socket:HfSfgt1dER5CqQU3AAAA IP:172.23.0.1 authorID:a.svpwMUur5zF2iG3n
[2020-09-28 22:49:36.273] [INFO] access - [CREATE] pad:BACKEND_TEST_ratelimit_99ms socket:SVac2ItC0gRoO1aOAAAB IP:172.23.0.1 authorID:a.vf4vfO17qrc7FTmo
[2020-09-28 22:49:37.870] [WARN] console - Rate limited:  172.23.0.1  to reduce the amount of rate limiting that happens edit the rateLimit values in settings.json
[2020-09-28 22:49:37.876] [INFO] access - [LEAVE] pad:BACKEND_TEST_ratelimit_99ms socket:SVac2ItC0gRoO1aOAAAB IP:172.23.0.1 authorID:a.vf4vfO17qrc7FTmo
[2020-09-28 22:49:38.024] [INFO] access - [ENTER] pad:BACKEND_TEST_ratelimit_101ms socket:uFAHoOKY6ibCiZ-RAAAC IP:172.23.0.1 authorID:a.eDwC2Tg2eQIhEbOS
[2020-09-28 22:49:38.043] [INFO] access - [CREATE] pad:BACKEND_TEST_ratelimit_101ms_direct socket:WGu6vV3ugwt_OWORAAAD IP:172.23.0.1 authorID:a.k4Ejg3G8ON88s2j8
[2020-09-28 22:49:39.554] [WARN] console - Rate limited:  172.23.0.1  to reduce the amount of rate limiting that happens edit the rateLimit values in settings.json
[2020-09-28 22:49:39.559] [INFO] access - [LEAVE] pad:BACKEND_TEST_ratelimit_101ms socket:uFAHoOKY6ibCiZ-RAAAC IP:172.23.0.1 authorID:a.eDwC2Tg2eQIhEbOS
[2020-09-28 22:49:39.562] [WARN] console - Rate limited:  172.23.0.1  to reduce the amount of rate limiting that happens edit the rateLimit values in settings.json
101ms with proxy returned with 1
101ms without proxy returned with 1
FAILED: ratelimit was triggered
[2020-09-28 22:49:39.571] [INFO] access - [LEAVE] pad:BACKEND_TEST_ratelimit_101ms_direct socket:WGu6vV3ugwt_OWORAAAD IP:172.23.0.1 authorID:a.k4Ejg3G8ON88s2j8
travis_time:end:0e244480:start=1601333364693588715,finish=1601333379578749568,duration=14885160853,event=scriptThe command "cd tests/ratelimit && bash testlimits.sh" exited with 1.


Done. Your build exited with 1.
